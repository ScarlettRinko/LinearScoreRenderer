# 线性乐谱渲染器
本项目用于将线性乐谱转换为 midi 文件或音频。

&emsp;&emsp;线性乐谱是本项目创制的一种 ASCII 字符书写简单乐谱的方式。下面将详细介绍线性乐谱。

## 线性乐谱
&emsp;&emsp;线性乐谱的行分为参数行和乐谱行。参数行用于修改演奏参数，乐谱行用于描述音符。

## 参数行
&emsp;&emsp;参数行可以修改演奏参数，下一行起将使用新参数进行演奏。所有参数**大小写敏感**。

| 参数 | 格式 | 示例 |
| :--: | :-- | :--: |
| 谱号 | 以 `1=` 开头，后接 `CDEFGAB` 其一，然后可以选择接 `#b.,` 或其组合来表示半音和八度。| `1=C` |
| BPM | 以数字开头并以 `bpm` 结尾。| `120bpm` |

- **不同参数间使用空格连接。**参数无顺序。
- 若首行未指定参数，则默认为 `1=C 120bpm`。
- 若参数行未指定某一参数，则继承该行以前的该项参数值。

一些正确的参数行示例：
- `1=G 100bpm` 表示 G 大调，100 bpm
- `1=Bb. 70bpm` 表示低八度 Bb 大调，70 bpm
- `1=A` 表示 A 大调，bpm 继承上一个参数行。若前面没有其它参数行，则保持默认值 120 bpm

## 音符行
&emsp;&emsp;与简谱相同，线性乐谱用 1 至 7 七个数字代表七个音符。

### 音符后缀
&emsp;&emsp;音符后可以接后缀表示音高和时值。下面是所有允许的后缀：

| 音高后缀 | 含义 | 时值后缀 | 含义 | 时值后缀 | 含义 |
| :--: | :--: | :--: | :--: | :--: | :--: |
| `#` | 高半音 | `-` | 1 拍 | `*` | 0.5 拍 |
| `b` | 低半音 | `~` | 1.5 拍 | `^` | 1/4 拍 |
| `.` | 高八度 | `=` | 2 拍 | `'` | 1/8 拍 |
| `,` | 低八度 | `+` | 4 拍 |

- **若音符无时值后缀，则默认为 0.5 拍。**
- 后缀**可以叠加**且无顺序。可以用时值后缀组合出不同的拍数，比如 3 拍使用 `~~` 或 `=-` 后缀。

一些正确的音符示例：
- `1` 表示 0.5 拍 do
- `5-` 表示 1 拍 sol
- `1.-` 表示 1 拍高八度 do
- `1=*` 表示 2.5 拍 do

## 乐谱示例
卡农
```
1=D
5-345-34(1+(3+(5+)))
55,6,7,1234(7,+(2+(5+)))
3-123-3,4,(6,+(1+(3+)))
5,6,5,4,5,3,4,5,(5,+(7,+(3+)))
4,-6,5,4,-3,2,(4,+(6,+(1+)))
3,2,1,2,3,4,5,6,(3,+(5,+(1+)))
4,-6,5,6,-7,1(4,+(6,+(1+)))
5,6,7,12345(5,+(7,+(2+)))
```
更多乐谱示例位于 src/assets/template/ 文件夹下
